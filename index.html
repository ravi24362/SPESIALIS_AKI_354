<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Toko Aki | Sepesialis Aki 354</title>
  <style>
    .form-input {
  width: 100%;
  padding: 8px;
  margin: 6px 0;
  border-radius: 6px;
  border: 1px solid #334155;
  background: #0f172a;
  color: var(--text);
}
    :root {
      --bg: #0f172a;
      --card: #111827;
      --muted: #94a3b8;
      --text: #e5e7eb;
      --brand: #facc15;
      --danger: #ef4444;
    }
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:sans-serif;background:var(--bg);color:var(--text)}
    header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:16px;
      background:#1e293b;
      position:sticky;
      top:0;
      z-index:10;
    }
    .logo{font-size:1.2rem;font-weight:bold;color:var(--brand)}
    .cart{position:relative;cursor:pointer}
    .cart-count{
      position:absolute;
      top:-8px;right:-8px;
      background:var(--danger);
      color:white;
      font-size:12px;
      padding:2px 6px;
      border-radius:50%;
    }
    .container{max-width:1100px;margin:auto;padding:24px 16px 60px}
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
    }
    /* HP â†’ tampil 2 produk per baris */
    @media (max-width: 768px) {
      .grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    .card{
      background:var(--card);
      border-radius:12px;
      overflow:hidden;
      display:flex;
      flex-direction:column;
    }
    .card img{width:100%;height:160px;object-fit:cover}
    .info{padding:12px;flex:1}
    .title{font-size:1rem;font-weight:bold;margin-bottom:4px}
    .price{color:var(--brand);margin-bottom:8px}
    .add-btn{
      background:var(--brand);
      border:none;
      padding:8px;
      cursor:pointer;
      font-weight:bold;
      border-radius:0 0 12px 12px;
    }
    /* modal keranjang */
    .modal{
      position:fixed;
      top:0;left:0;right:0;bottom:0;
      background:rgba(0,0,0,0.6);
      display:none;
      justify-content:center;
      align-items:center;
      z-index:20;
    }
    .modal-content{
      background:#1e293b;
      padding:20px;
      border-radius:12px;
      width:90%;
      max-width:400px;
      max-height:80%;
      overflow-y:auto;
    }
    .cart-item{
      display:flex;
      gap:10px;
      margin-bottom:10px;
      background:var(--card);
      padding:8px;
      border-radius:8px;
    }
    .cart-item img{width:60px;height:60px;object-fit:cover;border-radius:6px}
    .cart-item .info{flex:1}
    .cart-total{font-weight:bold;margin:12px 0}
    .checkout{background:var(--brand);padding:10px;border-radius:8px;text-align:center;font-weight:bold}
    .close{background:var(--danger);padding:8px 12px;border:none;border-radius:8px;color:white;cursor:pointer;margin-top:10px;width:100%}

    /* tombol + dan - di keranjang */
    .cart-item .qty-controls {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-top: 4px;
    }
    .qty-controls button {
      width: 24px;
      height: 24px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: var(--brand);
      color: white;
      font-weight: bold;
      line-height: 1;
    }
    .qty-controls button.minus {
      background: var(--danger);
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">âš¡ Sepesialis Aki 354</div>
    <div class="cart" id="cartBtn">ðŸ›’<span class="cart-count" id="cartCount">0</span></div>
  </header>

  <div class="container">
    <div class="grid" id="productGrid">
      <!-- produk akan dimasukkan via JS -->
    </div>
  </div>

  <!-- Modal keranjang -->
  <div class="modal" id="cartModal">
    <div class="modal-content">
  <h2>Keranjang</h2>
  <div id="cartItems"></div>
  <div class="cart-total" id="cartTotal">Total: Rp 0</div>

  <!-- Form Nama & Alamat -->
  <input type="text" id="custName" class="form-input" placeholder="Nama Anda">
  <textarea id="custAddress" class="form-input" placeholder="Alamat Lengkap"></textarea>

  <a href="#" id="waLink" class="checkout">Pesan</a>
  <button class="close" id="closeCart">Tutup</button>
</div>
  </div>

  <script>
    const products=[
      {id:1,name:"Aki GS Astra 12V 45Ah",price:850000,img:"https://dummyimage.com/400x300/222/fff&text=Aki+GS"},
      {id:2,name:"Aki Yuasa 12V 35Ah",price:750000,img:"https://dummyimage.com/400x300/333/fff&text=Aki+Yuasa"},
      {id:3,name:"Aki Incoe 12V 55Ah",price:950000,img:"https://dummyimage.com/400x300/444/fff&text=Aki+Incoe"},
      {id:4,name:"Aki Bosch 12V 60Ah",price:1250000,img:"https://dummyimage.com/400x300/555/fff&text=Aki+Bosch"},
      {id:5,name:"Aki Yuasa 12V 35Ah",price:750000,img:"https://dummyimage.com/400x300/333/fff&text=Aki+Yuasa"},
      {id:6,name:"Aki Yuasa 12V 35Ah",price:750000,img:"https://dummyimage.com/400x300/333/fff&text=Aki+Yuasa"},
      {id:7,name:"Aki Yuasa 12V 35Ah",price:750000,img:"https://dummyimage.com/400x300/333/fff&text=Aki+Yuasa"},
      {id:8,name:"Aki Yuasa 12V 35Ah",price:750000,img:"https://dummyimage.com/400x300/333/fff&text=Aki+Yuasa"},
      {id:9,name:"Aki Yuasa 12V 35Ah",price:750000,img:"https://dummyimage.com/400x300/333/fff&text=Aki+Yuasa"},
      {id:10,name:"Aki Yuasa 12V 35Ah",price:750000,img:"https://dummyimage.com/400x300/333/fff&text=Aki+Yuasa"},
    ];

    const grid=document.getElementById("productGrid");
    const cartBtn=document.getElementById("cartBtn");
    const cartModal=document.getElementById("cartModal");
    const closeCart=document.getElementById("closeCart");
    const cartItemsEl=document.getElementById("cartItems");
    const cartTotalEl=document.getElementById("cartTotal");
    const cartCountEl=document.getElementById("cartCount");
    const waLink=document.getElementById("waLink");

    let cart=[];
    let count=0;
    let total=0;

    // tampilkan produk
    products.forEach(p=>{
      const card=document.createElement('div');
      card.className="card";
      card.innerHTML=`
        <img src="${p.img}" alt="${p.name}">
        <div class="info">
          <div class="title">${p.name}</div>
          <div class="price">Rp ${p.price.toLocaleString('id-ID')}</div>
        </div>
        <button class="add-btn" data-id="${p.id}">+ Keranjang</button>
      `;
      grid.appendChild(card);
    });

    // tambah ke keranjang
    document.querySelectorAll('.add-btn').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const id=btn.dataset.id;
        const prod=products.find(p=>p.id==id);
        const found=cart.find(c=>c.id==id);
        if(found){
          found.qty++;
        }else{
          cart.push({...prod,qty:1});
        }
        count++;
        cartCountEl.textContent=count;
        updateCartView();
      });
    });

    function updateCartView(){
      cartItemsEl.innerHTML="";
      total=0;
      cart.forEach((item,index)=>{
        total+=item.price*item.qty;
        const div=document.createElement('div');
        div.className="cart-item";
        div.innerHTML=`
          <img src="${item.img}" alt="${item.name}">
          <div class="info">
            <div class="name">${item.name}</div>
            <div class="qty">Rp ${(item.price*item.qty).toLocaleString('id-ID')}</div>
            <div class="qty-controls">
              <button class="minus" data-index="${index}">-</button>
              <span>${item.qty}</span>
              <button class="plus" data-index="${index}">+</button>
            </div>
          </div>
        `;
        cartItemsEl.appendChild(div);
      });
      cartTotalEl.textContent="Total: Rp "+ total.toLocaleString('id-ID');
       
      // Kirim ke WhatsApp saat klik tombol Pesan
      async function saveToSheet(){
  const name = document.getElementById("custName")?.value || "";
  const addr = document.getElementById("custAddress")?.value || "";

  let items = cart.map(i => `${i.name} x${i.qty} (Rp ${(i.price*i.qty).toLocaleString('id-ID')})`).join(", ");
  let data = {
    name: name,
    address: addr,
    items: items,
    total: total
  };

  await fetch("PASTE_WEB_APP_URL_HERE", {
    method: "POST",
    body: JSON.stringify(data)
  });
}
wwaLink.addEventListener("click", async (e)=>{
  e.preventDefault();

  // simpan ke Google Sheet
  await saveToSheet();

  // lalu kirim ke WhatsApp
  let msg="Halo, saya ingin pesan aki:%0A";
  cart.forEach(i=>{
    msg+=`- ${i.name} x${i.qty} (Rp ${(i.price*i.qty).toLocaleString('id-ID')})%0A`;
  });
  msg+=`Total: Rp ${total.toLocaleString('id-ID')}`;

  const name = document.getElementById("custName")?.value || "";
  const addr = document.getElementById("custAddress")?.value || "";
  if(name) msg+=`%0A%0ANama: ${name}`;
  if(addr) msg+=`%0AAlamat: ${addr}`;

  window.open(`https://wa.me/62881037751668?text=${msg}`,"_blank");
});

      function updateCartView(){
  cartItemsEl.innerHTML="";
  total=0;
  cart.forEach((item,index)=>{
    total+=item.price*item.qty;
    const div=document.createElement('div');
    div.className="cart-item";
    div.innerHTML=`
      <img src="${item.img}" alt="${item.name}">
      <div class="info">
        <div class="name">${item.name}</div>
        <div class="qty">Rp ${(item.price*item.qty).toLocaleString('id-ID')}</div>
        <div class="qty-controls">
          <button class="minus" data-index="${index}">-</button>
          <span>${item.qty}</span>
          <button class="plus" data-index="${index}">+</button>
        </div>
      </div>
    `;
    cartItemsEl.appendChild(div);
  });
  cartTotalEl.textContent="Total: Rp "+ total.toLocaleString('id-ID');

  // event listener tombol + dan -
  document.querySelectorAll('.qty-controls .plus').forEach(btn=>{
    btn.addEventListener('click',()=>{
      let i=btn.dataset.index;
      cart[i].qty++;
      count++;
      cartCountEl.textContent=count;
      updateCartView();
    });
  });
  document.querySelectorAll('.qty-controls .minus').forEach(btn=>{
    btn.addEventListener('click',()=>{
      let i=btn.dataset.index;
      if(cart[i].qty>1){
        cart[i].qty--;
        count--;
      } else {
        count-=cart[i].qty;
        cart.splice(i,1);
      }
      cartCountEl.textContent=count;
      updateCartView();
    });
  });
}


      function updateCartView(){
  cartItemsEl.innerHTML="";
  total=0;
  cart.forEach((item,index)=>{
    total+=item.price*item.qty;
    const div=document.createElement('div');
    div.className="cart-item";
    div.innerHTML=`
      <img src="${item.img}" alt="${item.name}">
      <div class="info">
        <div class="name">${item.name}</div>
        <div class="qty">Rp ${(item.price*item.qty).toLocaleString('id-ID')}</div>
        <div class="qty-controls">
          <button class="minus" data-index="${index}">-</button>
          <span>${item.qty}</span>
          <button class="plus" data-index="${index}">+</button>
        </div>
      </div>
    `;
    cartItemsEl.appendChild(div);
  });
  cartTotalEl.textContent="Total: Rp "+ total.toLocaleString('id-ID');

  // Buat pesan WhatsApp
  let msg="Halo, saya ingin pesan aki:%0A";
  cart.forEach(i=>{
    msg+=`- ${i.name} x${i.qty} (Rp ${(i.price*i.qty).toLocaleString('id-ID')})%0A`;
  });
  msg+=`Total: Rp ${total.toLocaleString('id-ID')}`;

  // Tambahkan nama & alamat (ambil value dari input)
  const name = document.getElementById("custName")?.value || "";
  const addr = document.getElementById("custAddress")?.value || "";
  if(name) msg+=`%0A%0ANama: ${name}`;
  if(addr) msg+=`%0AAlamat: ${addr}`;

  waLink.href=`https://wa.me/62881037751668?text=${msg}`;

  // event listener tombol + dan -
  document.querySelectorAll('.qty-controls .plus').forEach(btn=>{
    btn.addEventListener('click',()=>{
      let i=btn.dataset.index;
      cart[i].qty++;
      count++;
      cartCountEl.textContent=count;
      updateCartView();
    });
  });
  document.querySelectorAll('.qty-controls .minus').forEach(btn=>{
    btn.addEventListener('click',()=>{
      let i=btn.dataset.index;
      if(cart[i].qty>1){
        cart[i].qty--;
        count--;
      } else {
        count-=cart[i].qty;
        cart.splice(i,1);
      }
      cartCountEl.textContent=count;
      updateCartView();
    });
  });
}

      // event listener untuk tombol + dan -
      document.querySelectorAll('.qty-controls .plus').forEach(btn=>{
        btn.addEventListener('click',()=>{
          let i=btn.dataset.index;
          cart[i].qty++;
          count++;
          cartCountEl.textContent=count;
          updateCartView();
        });
      });
      document.querySelectorAll('.qty-controls .minus').forEach(btn=>{
        btn.addEventListener('click',()=>{
          let i=btn.dataset.index;
          if(cart[i].qty>1){
            cart[i].qty--;
            count--;
          } else {
            count-=cart[i].qty;
            cart.splice(i,1);
          }
          cartCountEl.textContent=count;
          updateCartView();
        });
      });
    }

    cartBtn.addEventListener('click',()=>cartModal.style.display="flex");
    closeCart.addEventListener('click',()=>cartModal.style.display="none");
  </script>
</body>
</html>
